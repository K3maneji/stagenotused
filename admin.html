<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Админ-панель - StageNotUsed</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="./css/style-first.css">
</head>
<body>
    <!-- Форма входа в админ-панель -->
    <div id="admin-login">
        <div class="login-container">
            <div class="login-logo">StageNotUsed</div>
            <h3 class="login-title">Доступ к панели управления</h3>
            <input type="password" id="admin-password" class="login-input" placeholder="Введите пароль администратора">
            <button class="login-btn" onclick="checkAdminPassword()">
                Войти в панель управления
            </button>
            <div id="login-error" class="login-error">
                <i class="fas fa-exclamation-triangle"></i> Неверный пароль!
            </div>
            <p class="login-info">
                Для доступа обратитесь к системному администратору
            </p>
        </div>
    </div>

    <!-- Основной контент админ-панели (скрыт до входа) -->
    <div id="admin-content" style="display: none;">
        <div class="admin-container">
            <a href="index.html" class="back-link">
                <i class="fas fa-arrow-left"></i>
                Вернуться на сайт
            </a>
            
            <div class="admin-header">
                <h1><i class="fas fa-cogs"></i> Админ-панель StageNotUsed</h1>
                <p>Управление каталогом оборудования</p>
                <button class="btn btn-warning" onclick="logoutAdmin()" style="margin-top: 15px;">
                    <i class="fas fa-sign-out-alt"></i> Выйти из админ-панели
                </button>
            </div>
            
            <div class="admin-nav">
                <button class="nav-btn active" onclick="showSection('products')">
                    <i class="fas fa-boxes"></i> Управление товарами
                </button>
                <button class="nav-btn" onclick="showSection('brands')">
                    <i class="fas fa-tags"></i> Управление брендами
                </button>
                <button class="nav-btn" onclick="showSection('import')">
                    <i class="fas fa-file-import"></i> Импорт/Экспорт
                </button>
                <button class="nav-btn" onclick="showSection('stats')">
                    <i class="fas fa-chart-bar"></i> Статистика
                </button>
                <button class="nav-btn" onclick="showSection('storage')">
                    <i class="fas fa-database"></i> Хранилище
                </button>
            </div>

            <!-- Секция управления товарами -->
            <div id="products-section" class="admin-section active">
                <h2 class="section-title">Добавить новый товар</h2>
                
                <div id="alert-container"></div>
                
                <form id="product-form">
                    <div class="form-group">
                        <label for="product-brand">Бренд *</label>
                        <select id="product-brand" required>
                            <option value="">Выберите бренд</option>
                            <option value="pr-lighting-ltd">PR LIGHTING LTD</option>
                            <option value="martin">Martin</option>
                            <option value="robert-juliat">Robert Juliat</option>
                            <option value="vari-lite">Vari-Lite</option>
                            <option value="et-c">ETC</option>
                            <option value="ayrton">Ayrton</option>
                            <option value="chroma-q">Chroma-Q</option>
                            <option value="glp">GLP</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="product-name">Название товара *</label>
                        <input type="text" id="product-name" required placeholder="Например: PR-6000 Framing (1400 Вт)">
                    </div>
                    
                    <div class="form-group">
                        <label for="product-price">Цена *</label>
                        <input type="text" id="product-price" required placeholder="Например: 245 000 ₽">
                    </div>
                    
                    <div class="form-group">
                        <label for="product-description">Описание *</label>
                        <textarea id="product-description" required placeholder="Подробное описание товара..."></textarea>
                    </div>
                    
                    <!-- Изображения -->
                    <div class="form-group">
                        <div class="dynamic-field-header">
                            <span class="field-title">Изображения товара</span>
                        </div>
                        <div class="image-upload-container" id="images-upload-container">
                            <div class="upload-btn" onclick="document.getElementById('image-upload').click()">
                                <i class="fas fa-cloud-upload-alt"></i>
                                <span>Загрузить изображение</span>
                            </div>
                        </div>
                        <input type="file" id="image-upload" accept="image/*" multiple style="display: none;" onchange="handleImageUpload(this.files)">
                        <div class="progress-bar" id="upload-progress">
                            <div class="progress" id="upload-progress-bar"></div>
                        </div>
                    </div>
                    
                    <!-- Характеристики -->
                    <div class="form-group">
                        <div class="dynamic-field-header">
                            <span class="field-title">Характеристики</span>
                            <button type="button" class="btn btn-sm btn-success" onclick="addSpecField('specs')">
                                <i class="fas fa-plus"></i> Добавить характеристику
                            </button>
                        </div>
                        <div id="specs-container">
                            <div class="dynamic-field">
                                <input type="text" class="spec-name" placeholder="Название характеристики" style="width: 100%; margin-bottom: 10px;">
                                <input type="text" class="spec-value" placeholder="Значение характеристики" style="width: 100%;">
                                <button type="button" class="btn btn-sm btn-danger" onclick="this.parentElement.remove()" style="margin-top: 10px;">
                                    <i class="fas fa-trash"></i> Удалить
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Цвет -->
                    <div class="form-group">
                        <div class="dynamic-field-header">
                            <span class="field-title">Цветовые характеристики</span>
                            <button type="button" class="btn btn-sm btn-success" onclick="addSpecField('color')">
                                <i class="fas fa-plus"></i> Добавить параметр
                            </button>
                        </div>
                        <div id="color-container">
                            <div class="dynamic-field">
                                <input type="text" class="spec-name" placeholder="Параметр цвета" style="width: 100%; margin-bottom: 10px;">
                                <input type="text" class="spec-value" placeholder="Описание" style="width: 100%;">
                                <button type="button" class="btn btn-sm btn-danger" onclick="this.parentElement.remove()" style="margin-top: 10px;">
                                    <i class="fas fa-trash"></i> Удалить
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Гобо -->
                    <div class="form-group">
                        <div class="dynamic-field-header">
                            <span class="field-title">Гобо характеристики</span>
                            <button type="button" class="btn btn-sm btn-success" onclick="addSpecField('gobo')">
                                <i class="fas fa-plus"></i> Добавить параметр
                            </button>
                        </div>
                        <div id="gobo-container">
                            <div class="dynamic-field">
                                <input type="text" class="spec-name" placeholder="Параметр гобо" style="width: 100%; margin-bottom: 10px;">
                                <input type="text" class="spec-value" placeholder="Описание" style="width: 100%;">
                                <button type="button" class="btn btn-sm btn-danger" onclick="this.parentElement.remove()" style="margin-top: 10px;">
                                    <i class="fas fa-trash"></i> Удалить
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Обрамление -->
                    <div class="form-group">
                        <div class="dynamic-field-header">
                            <span class="field-title">Характеристики обрамления</span>
                            <button type="button" class="btn btn-sm btn-success" onclick="addSpecField('frame')">
                                <i class="fas fa-plus"></i> Добавить параметр
                            </button>
                        </div>
                        <div id="frame-container">
                            <div class="dynamic-field">
                                <input type="text" class="spec-name" placeholder="Параметр обрамления" style="width: 100%; margin-bottom: 10px;">
                                <input type="text" class="spec-value" placeholder="Описание" style="width: 100%;">
                                <button type="button" class="btn btn-sm btn-danger" onclick="this.parentElement.remove()" style="margin-top: 10px;">
                                    <i class="fas fa-trash"></i> Удалить
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Видео -->
                    <div class="form-group">
                        <div class="dynamic-field-header">
                            <span class="field-title">Видео материалы (URL)</span>
                            <button type="button" class="btn btn-sm btn-success" onclick="addVideoField()">
                                <i class="fas fa-plus"></i> Добавить видео
                            </button>
                        </div>
                        <div id="videos-container">
                            <div class="dynamic-field">
                                <input type="text" class="video-title" placeholder="Название видео" style="width: 100%; margin-bottom: 10px;">
                                <input type="text" class="video-description" placeholder="Описание видео" style="width: 100%; margin-bottom: 10px;">
                                <input type="text" class="video-url" placeholder="https://youtube.com/embed/..." style="width: 100%;">
                                <button type="button" class="btn btn-sm btn-danger" onclick="this.parentElement.remove()" style="margin-top: 10px;">
                                    <i class="fas fa-trash"></i> Удалить
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Документация -->
                    <div class="form-group">
                        <div class="dynamic-field-header">
                            <span class="field-title">Документация для скачивания (URL)</span>
                            <button type="button" class="btn btn-sm btn-success" onclick="addDownloadField()">
                                <i class="fas fa-plus"></i> Добавить документ
                            </button>
                        </div>
                        <div id="downloads-container">
                            <div class="dynamic-field">
                                <input type="text" class="download-name" placeholder="Название документа" style="width: 100%; margin-bottom: 10px;">
                                <input type="text" class="download-description" placeholder="Описание документа" style="width: 100%; margin-bottom: 10px;">
                                <input type="text" class="download-url" placeholder="https://example.com/document.pdf" style="width: 100%;">
                                <button type="button" class="btn btn-sm btn-danger" onclick="this.parentElement.remove()" style="margin-top: 10px;">
                                    <i class="fas fa-trash"></i> Удалить
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <button type="submit" class="btn btn-primary" style="padding: 15px 30px; font-size: 16px;">
                            <i class="fas fa-save"></i> Сохранить товар
                        </button>
                        <button type="button" class="btn btn-warning" onclick="resetForm()">
                            <i class="fas fa-redo"></i> Очистить форму
                        </button>
                    </div>
                </form>
                
                <!-- Список существующих товаров -->
                <h2 class="section-title" style="margin-top: 50px;">Существующие товары</h2>
                <div id="products-list-container" class="products-grid">
                    <!-- Товары будут загружаться динамически -->
                </div>
            </div>
            
            <!-- Другие секции -->
            <div id="brands-section" class="admin-section">
                <h2 class="section-title">Управление брендами</h2>
                <div class="alert alert-info">
                    <i class="fas fa-info-circle"></i> Здесь вы можете управлять брендами оборудования.
                </div>
            </div>
            
            <div id="import-section" class="admin-section">
                <h2 class="section-title">Импорт и экспорт данных</h2>
                <div class="alert alert-info">
                    <i class="fas fa-info-circle"></i> Экспортируйте данные в JSON файл или импортируйте из него.
                </div>
                
                <div class="form-group">
                    <button class="btn btn-success" onclick="exportToJson()">
                        <i class="fas fa-download"></i> Экспорт в JSON
                    </button>
                    <button class="btn btn-info" onclick="importFromJson()">
                        <i class="fas fa-upload"></i> Импорт из JSON
                    </button>
                    <button class="btn btn-warning" onclick="clearStorage()">
                        <i class="fas fa-trash"></i> Очистить хранилище
                    </button>
                </div>
            </div>
            
            <div id="stats-section" class="admin-section">
                <h2 class="section-title">Статистика</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="total-products">0</div>
                        <div class="stat-label">Всего товаров</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="total-brands">0</div>
                        <div class="stat-label">Брендов</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="total-images">0</div>
                        <div class="stat-label">Изображений</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="total-docs">0</div>
                        <div class="stat-label">Документов</div>
                    </div>
                </div>
            </div>
            
            <!-- Новая секция для управления хранилищем -->
            <div id="storage-section" class="admin-section">
                <h2 class="section-title">Управление хранилищем</h2>
                <div class="alert alert-info">
                    <i class="fas fa-info-circle"></i> Здесь вы можете управлять загруженными изображениями.
                </div>
                
                <div class="form-group">
                    <button class="btn btn-info" onclick="showStorageStats()">
                        <i class="fas fa-chart-pie"></i> Статистика хранилища
                    </button>
                    <button class="btn btn-warning" onclick="cleanupUnusedImages()">
                        <i class="fas fa-broom"></i> Очистить неиспользуемые изображения
                    </button>
                </div>
                
                <div id="storage-stats-container"></div>
            </div>
        </div>
    </div>

    <script src="./js/script-first.js"></script>
</body>
</html>