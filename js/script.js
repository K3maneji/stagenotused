const productsData = {
            "pr-lighting-ltd": [
                {
                    id: 1,
                    name: "PR-6000 Framing (1400 Вт)",
                    description: "PR-6000 Framing (1400 Вт) — это подвижная головка для обрамления и точечного освещения с использованием лампы Orsam lok-it 1400/PS и диапазоном масштабирования от 6 до 55 градусов, реализованным с помощью разработанной нами оптической системы 9 X. Она обладает высокой яркостью, индексом цветопередачи и равномерностью, что позволяет преодолеть ограничение, связанное с тем, что традиционные светильники с газоразрядными лампами не могут одновременно обеспечивать высокую яркость и индекс цветопередачи. Имеется патент на изобретение постоянно вращающегося модуля обрамления, который создает множество графических изображений.",
                    price: "245 000 ₽",
                    images: [
                        "http://www.pr-lighting.com/vancheerfile/images/2025/8/2025081416532403.png",
                        "http://www.pr-lighting.com/vancheerfile/images/2020/9/20200922111429287.png",
                        "http://www.pr-lighting.com/vancheerfile/images/2020/9/20200923100329128.png"
                    ],
                    specs: [
                        { name: "Входное напряжение", value: "208В-240 В переменного тока, 50/60 Гц" },
                        { name: "Номинальная мощность", value: "1800 Вт при 220 В" },
                        { name: "Источник света", value: "OSRAM lok-it 1400/PS <br> Цветовая температура: 6000K <br> CRI: >90 <br> подставка для лампы: односторонний <br> срок службы: 750 часов" },
                        { name: "CTO", value: "Линейный CTO от 0 до 100 %" },
                        { name: "Призма", value: "1 трёхгранная призма <br> Двунаправленное вращение с переменной скоростью и функцией индексации" },
                        { name: "Холод", value: "1 фильтр от запотевания, линейный эффект запотевания" },
                        { name: "Фокус", value: "Линейная Фокусировка DMX" },
                        { name: "Dimmer", value: "Линейная регулировка 0–100 %" },
                        { name: "Iris", value: "Линейная регулировка от 5 до 100 % с помощью макросов" },
                        { name: "Strobe", value: "Двойные лопасти затвора, 0,3–25 FPS" },
                        { name: "Движение головы", value: "Панорама 540º, наклон 270º с автоматической коррекцией положения" },
                        { name: "Угол наклона", value: "линейное масштабирование 6°～55°с 16-битной функцией" },
                        { name: "Контроль", value: "5-контактные интерфейсы DMX512 <br> Протокол управления RDM <br> 33 канала в коротком режиме, 36 каналов в стандартном режиме <br> 52 канала в расширенном режиме, режиме самодиагностики " },
                        { name: "Общие функции", value: "Регулируемая скорость панорамирования и наклона <br> Отображается индикатор и общее количество часов <br> ЖК-дисплей с поддержкой английского и китайского языков с регулировкой контрастности и яркости <br> Энергосберегающий балласт <br> Встроенная система диагностики датчиков <br> Изоляция входного сигнала <br> Модульная конструкция для удобства обслуживания <br> Интерфейс Ethernet <br> Беспроводной приёмник DMX512, Передатчик DMX512 (опционально) <br> ArtNet и sACN (необязательно) <br> Режим вентиляции: стандартный/театральный" },
                        { name: "Материал", value: "Высокотемпературный АБС-пластик, IP20" },
                        { name: "Вес нетто", value: "48 кг" },
                        { name: "Рабочая температура", value: "Максимальная температура окружающей среды 40°C" }
                    ],
                    color: [
                        { name: "CMY", value: "Система линейного смешивания CMY с макросами" },
                        { name: "Цветовое колесо", value: "1 Цветовое колесо: 7 цветов + Открыть <br> Эффект полутонов,Rэффект радуги с двунаправленной и переменной скоростью <br> Пошаговое/линейное изменение цвета" }
                    ],
                    gobo: [
                        { name: "Гобо-колесо", value: "2 вращающихся гобо-колеса с индексным позиционированием" },
                        { name: "Количество гобо", value: "7 статических + 7 вращающихся" },
                        { name: "Эффекты гобо", value: "Вращение, индексация, дрожание" }
                    ],
                    frame: [
                        { name: "Материал корпуса", value: "Прочный алюминиевый сплав" },
                        { name: "Защита", value: "IP20" },
                        { name: "Охлаждение", value: "Принудительное воздушное охлаждение" }
                    ],
                    videos: [
                        {
                            title: "Обзор PR LIGHTING LTD",
                            description: "Подробный обзор возможностей и функций прожектора PR LIGHTING LTD",
                            url: "http://www.pr-lighting.com/vancheerfile/files/2025/3/20250319150121029.mp4"
                        },

                    ],
                    downloads: [
                        { 
                            name: "Технический паспорт", 
                            description: "Полное техническое описание прибора со всеми характеристиками",
                            file: "sharpy_tech_specs.pdf"
                        },
                        { 
                            name: "Руководство пользователя", 
                            description: "Инструкция по эксплуатации и настройке прибора",
                            file: "sharpy_user_manual.pdf"
                        },
                        { 
                            name: "Каталог гобо", 
                            description: "Полный перечень доступных гобо для данного прибора",
                            file: "sharpy_gobo_catalog.pdf"
                        }
                    ]
                },
                {
                    id: 2,
                    name: "Clay Paky Mythos 2",
                    description: "Универсальный профильный прожектор с высокой световой отдачей. Подходит для театральных постановок и концертных выступлений.",
                    price: "189 500 ₽",
                    images: [
                        "https://images.unsplash.com/photo-1574269909862-7e1d70bb8078?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80",
                        "https://images.unsplash.com/photo-1492684223066-81342ee5ff30?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80"
                    ],
                    specs: [
                        { name: "Тип", value: "Профильный прожектор" },
                        { name: "Мощность", value: "20000 люмен" },
                        { name: "Светодиоды", value: "7x 60W RGBW" },
                        { name: "Угол луча", value: "6° - 60°" },
                        { name: "Потребляемая мощность", value: "550 Вт" }
                    ],
                    color: [
                        { name: "Цветовая система", value: "CMY+CTO цветосмешение" },
                        { name: "Цветовое колесо", value: "2 колеса с 6 фиксированными цветами" },
                        { name: "Цветовая температура", value: "3200K - 10000K" }
                    ],
                    gobo: [
                        { name: "Гобо-колесо", value: "2 колеса с 7 гобо каждое" },
                        { name: "Типы гобо", value: "Металлические и стеклянные" },
                        { name: "Вращение гобо", value: "540° непрерывное вращение" }
                    ],
                    frame: [
                        { name: "Конструкция", value: "Прочный литой алюминиевый корпус" },
                        { name: "Вес", value: "34 кг" },
                        { name: "Габариты", value: "520 x 380 x 640 мм" }
                    ],
                    videos: [
                        {
                            title: "Clay Paky Mythos 2 демонстрация",
                            description: "Демонстрация работы прожектора в различных режимах",
                            url: "https://www.youtube.com/embed/dQw4w9WgXcQ"
                        }
                    ],
                    downloads: [
                        { 
                            name: "Технический паспорт", 
                            description: "Полное техническое описание прибора",
                            file: "mythos2_tech_specs.pdf"
                        },
                        { 
                            name: "Инструкция по монтажу", 
                            description: "Руководство по установке и подключению",
                            file: "mythos2_installation.pdf"
                        }
                    ]
                }
            ],
            "martin": [
                {
                    id: 3,
                    name: "Martin MAC Aura XB",
                    description: "Мощный прожектор заливного света с равномерным распределением. Создает мягкое освещение без резких границ.",
                    price: "132 750 ₽",
                    images: [
                        "https://images.unsplash.com/photo-1501281668745-f7f57925c3b4?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=600&q=80"
                    ],
                    specs: [
                        { name: "Тип", value: "Прожектор заливного света" },
                        { name: "Мощность", value: "7500 люмен" },
                        { name: "Светодиоды", value: "19x 15W RGBW" },
                        { name: "Угол луча", value: "15° - 50°" },
                        { name: "Потребляемая мощность", value: "300 Вт" }
                    ],
                    color: [
                        { name: "Цветовая система", value: "RGBW светодиоды" },
                        { name: "Цветовое колесо", value: "6 фиксированных цветов" },
                        { name: "Цветовые эффекты", value: "Цветные стробы, макросы, радуга" }
                    ],
                    gobo: [
                        { name: "Гобо-колесо", value: "1 вращающееся гобо-колесо" },
                        { name: "Количество гобо", value: "7 статических гобо" },
                        { name: "Эффекты гобо", value: "Вращение, индексация" }
                    ],
                    frame: [
                        { name: "Материал", value: "Алюминиевый сплав" },
                        { name: "Защита", value: "IP20" },
                        { name: "Вес", value: "18.5 кг" }
                    ],
                    videos: [
                        {
                            title: "Martin MAC Aura XB обзор",
                            description: "Подробный обзор прожектора заливного света",
                            url: "https://www.youtube.com/embed/dQw4w9WgXcQ"
                        }
                    ],
                    downloads: [
                        { 
                            name: "Технический паспорт", 
                            description: "Полное техническое описание прибора",
                            file: "mac_aura_xb_specs.pdf"
                        }
                    ]
                }
            ]
        };

        const preloader = document.getElementById('preloader');
        const header = document.querySelector('header');
        const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
        const navLinks = document.querySelector('.nav-links');
        const brandCards = document.querySelectorAll('.brand-card');
        const sections = document.querySelectorAll('section');
        const searchInput = document.getElementById('search-input');
        const productsContainer = document.getElementById('products-container');
        const productModal = document.getElementById('product-modal');
        const orderModal = document.getElementById('order-modal');
        const closeModalButtons = document.querySelectorAll('.close-modal');
        const orderForm = document.getElementById('order-form');
        const feedbackForm = document.getElementById('feedback-form');
        const navLinksAll = document.querySelectorAll('.nav-link, .footer-links a');
        const backgroundVideo = document.getElementById('background-video');
        const catalogTitle = document.getElementById('catalog-title');
        const tabs = document.querySelectorAll('.tab');
        const tabContents = document.querySelectorAll('.tab-content');
        const carouselContainer = document.querySelector('.carousel-container');
        const carouselPrev = document.querySelector('.carousel-prev');
        const carouselNext = document.querySelector('.carousel-next');
        const carouselIndicators = document.querySelector('.carousel-indicators');

        let currentBrand = '';
        let currentSlideIndex = 0;
        let currentProductImages = [];

        document.addEventListener('DOMContentLoaded', function() {
            showSection('home');
            
            setupVideoBackground();
            
            initEventListeners();
            
            setTimeout(function() {
                preloader.style.opacity = '0';
                preloader.style.visibility = 'hidden';
            }, 1500);
        });

        function setupVideoBackground() {
            backgroundVideo.loop = true;
            backgroundVideo.autoplay = true;
            backgroundVideo.muted = true;
            backgroundVideo.playsInline = true;
            
            backgroundVideo.addEventListener('ended', function() {
                this.currentTime = 0;
                this.play();
            });
            
            backgroundVideo.addEventListener('loadeddata', function() {
                this.play().catch(function(error) {
                    console.log('Автовоспроизведение видео заблокировано:', error);
                });
            });
        }

        function initEventListeners() {
            window.addEventListener('scroll', function() {
                if (window.scrollY > 50) {
                    header.classList.add('scrolled');
                } else {
                    header.classList.remove('scrolled');
                }
            });

            mobileMenuBtn.addEventListener('click', function() {
                navLinks.classList.toggle('active');
            });

            brandCards.forEach(card => {
                card.addEventListener('click', function() {
                    const brand = this.getAttribute('data-brand');
                    currentBrand = brand;
                    showCatalogByBrand(brand);
                    showSection('catalog');
                });
            });

            navLinksAll.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const target = this.getAttribute('data-target');
                    
                    if (target === 'catalog') {
                        currentBrand = '';
                        showAllProducts();
                    }
                    
                    showSection(target);
                    
                    if (navLinks.classList.contains('active')) {
                        navLinks.classList.remove('active');
                    }
                });
            });

            searchInput.addEventListener('input', function() {
                filterProducts(this.value);
            });

            closeModalButtons.forEach(button => {
                button.addEventListener('click', function() {
                    productModal.style.display = 'none';
                    orderModal.style.display = 'none';
                });
            });

            window.addEventListener('click', function(e) {
                if (e.target === productModal) {
                    productModal.style.display = 'none';
                }
                if (e.target === orderModal) {
                    orderModal.style.display = 'none';
                }
            });

            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    
                    tabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(c => c.classList.remove('active'));
                    
                    this.classList.add('active');
                    document.getElementById(`${tabId}-content`).classList.add('active');
                });
            });

            carouselPrev.addEventListener('click', function() {
                showSlide(currentSlideIndex - 1);
            });

            carouselNext.addEventListener('click', function() {
                showSlide(currentSlideIndex + 1);
            });

            orderForm.addEventListener('submit', function(e) {
                e.preventDefault();
                alert('Заказ успешно отправлен! Мы свяжемся с вами в ближайшее время.');
                orderModal.style.display = 'none';
                orderForm.reset();
            });

            feedbackForm.addEventListener('submit', function(e) {
                e.preventDefault();
                alert('Спасибо за ваше сообщение! Мы рассмотрим его в ближайшее время.');
                feedbackForm.reset();
            });
        }

        function showSection(sectionId) {
            sections.forEach(section => {
                section.style.display = 'none';
            });
            
            document.getElementById(sectionId).style.display = 'block';
            
            window.scrollTo(0, 0);
        }

        function showCatalogByBrand(brand) {
            const products = productsData[brand] || [];
            displayProducts(products);
            
            const brandName = document.querySelector(`.brand-card[data-brand="${brand}"] .brand-name`).textContent;
            catalogTitle.textContent = `Каталог оборудования ${brandName}`;
        }

        function showAllProducts() {
            let allProducts = [];
            
            for (const brand in productsData) {
                allProducts = allProducts.concat(productsData[brand]);
            }
            
            displayProducts(allProducts);
            catalogTitle.textContent = 'Весь каталог оборудования';
        }

        function displayProducts(products) {
            productsContainer.innerHTML = '';
            
            if (products.length === 0) {
                productsContainer.innerHTML = '<p style="text-align: center; width: 100%;">Товары не найдены</p>';
                return;
            }
            
            products.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                productCard.innerHTML = `
                    <div class="product-image">
                        <img src="${product.images[0]}" alt="${product.name}">
                    </div>
                    <div class="product-content">
                        <h3 class="product-title">${product.name}</h3>
                        <div class="product-price">${product.price}</div>
                        <div class="product-actions">
                            <button class="btn btn-outline details-btn" data-id="${product.id}">Подробнее</button>
                            <button class="btn btn-primary order-btn" data-id="${product.id}">Заказать</button>
                        </div>
                    </div>
                `;
                productsContainer.appendChild(productCard);
            });
            
            document.querySelectorAll('.details-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const productId = parseInt(this.getAttribute('data-id'));
                    showProductDetails(productId);
                });
            });
            
            document.querySelectorAll('.order-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const productId = parseInt(this.getAttribute('data-id'));
                    showOrderModal(productId);
                });
            });
        }

        function showProductDetails(productId) {
            const product = findProductById(productId);
            if (!product) return;
            
            document.getElementById('modal-product-title').textContent = product.name;
            document.getElementById('modal-product-desc').textContent = product.description;
            
            currentProductImages = product.images || [];
            currentSlideIndex = 0;
            setupCarousel(currentProductImages);
            
            const specsList = document.getElementById('modal-product-specs');
            specsList.innerHTML = '';
            
            if (product.specs && product.specs.length > 0) {
                product.specs.forEach(spec => {
                    const specItem = document.createElement('div');
                    specItem.className = 'info-section';
                    specItem.innerHTML = `
                        <h4>${spec.name}</h4>
                        <p>${spec.value}</p>
                    `;
                    specsList.appendChild(specItem);
                });
            } else {
                specsList.innerHTML = '<p>Характеристики не указаны</p>';
            }
            
            const colorContent = document.getElementById('modal-product-color');
            colorContent.innerHTML = '';
            
            if (product.color && product.color.length > 0) {
                product.color.forEach(item => {
                    const colorItem = document.createElement('div');
                    colorItem.className = 'info-section';
                    colorItem.innerHTML = `
                        <h4>${item.name}</h4>
                        <p>${item.value}</p>
                    `;
                    colorContent.appendChild(colorItem);
                });
            } else {
                colorContent.innerHTML = '<p>Информация о цвете не указана</p>';
            }
            
            const goboContent = document.getElementById('modal-product-gobo');
            goboContent.innerHTML = '';
            
            if (product.gobo && product.gobo.length > 0) {
                product.gobo.forEach(item => {
                    const goboItem = document.createElement('div');
                    goboItem.className = 'info-section';
                    goboItem.innerHTML = `
                        <h4>${item.name}</h4>
                        <p>${item.value}</p>
                    `;
                    goboContent.appendChild(goboItem);
                });
            } else {
                goboContent.innerHTML = '<p>Информация о гобо не указана</p>';
            }
            
            const frameContent = document.getElementById('modal-product-frame');
            frameContent.innerHTML = '';
            
            if (product.frame && product.frame.length > 0) {
                product.frame.forEach(item => {
                    const frameItem = document.createElement('div');
                    frameItem.className = 'info-section';
                    frameItem.innerHTML = `
                        <h4>${item.name}</h4>
                        <p>${item.value}</p>
                    `;
                    frameContent.appendChild(frameItem);
                });
            } else {
                frameContent.innerHTML = '<p>Информация об обрамлении не указана</p>';
            }
            
            const videoContent = document.getElementById('modal-product-video');
            videoContent.innerHTML = '';
            
            if (product.videos && product.videos.length > 0) {
                product.videos.forEach(video => {
                    const videoItem = document.createElement('div');
                    videoItem.className = 'video-item';
                    videoItem.innerHTML = `
                        <h4>${video.title}</h4>
                        <p>${video.description}</p>
                        <div class="video-wrapper">
                            <iframe src="${video.url}" allow="accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                        </div>
                    `;
                    videoContent.appendChild(videoItem);
                });
            } else {
                videoContent.innerHTML = '<p>Видео не доступны</p>';
            }
            
            const downloadsContent = document.getElementById('modal-product-downloads');
            downloadsContent.innerHTML = '';
            
            if (product.downloads && product.downloads.length > 0) {
                product.downloads.forEach(item => {
                    const downloadItem = document.createElement('div');
                    downloadItem.className = 'download-item';
                    downloadItem.innerHTML = `
                        <h4>${item.name}</h4>
                        <p>${item.description}</p>
                        <a href="#" class="download-btn" data-file="${item.file}">Скачать документ</a>
                    `;
                    downloadsContent.appendChild(downloadItem);
                });
                
                document.querySelectorAll('.download-btn').forEach(button => {
                    button.addEventListener('click', function(e) {
                        e.preventDefault();
                        const fileName = this.getAttribute('data-file');
                        alert(`Начато скачивание файла: ${fileName}`);
                    });
                });
            } else {
                downloadsContent.innerHTML = '<p>Документация не доступна</p>';
            }
            
            tabs.forEach(t => t.classList.remove('active'));
            tabContents.forEach(c => c.classList.remove('active'));
            document.querySelector('.tab[data-tab="specs"]').classList.add('active');
            document.getElementById('specs-content').classList.add('active');
            
            productModal.style.display = 'flex';
        }

        function setupCarousel(images) {
            carouselContainer.innerHTML = '';
            carouselIndicators.innerHTML = '';
            
            if (images.length === 0) {
                const noImageSlide = document.createElement('div');
                noImageSlide.className = 'carousel-slide active';
                noImageSlide.innerHTML = '<p>Изображение не доступно</p>';
                carouselContainer.appendChild(noImageSlide);
                return;
            }
            
            images.forEach((image, index) => {
                const slide = document.createElement('div');
                slide.className = `carousel-slide ${index === 0 ? 'active' : ''}`;
                slide.innerHTML = `<img src="${image}" alt="Изображение товара ${index + 1}">`;
                carouselContainer.appendChild(slide);
                
                const indicator = document.createElement('div');
                indicator.className = `carousel-indicator ${index === 0 ? 'active' : ''}`;
                indicator.addEventListener('click', () => showSlide(index));
                carouselIndicators.appendChild(indicator);
            });
            
            if (images.length <= 1) {
                carouselPrev.style.display = 'none';
                carouselNext.style.display = 'none';
                carouselIndicators.style.display = 'none';
            } else {
                carouselPrev.style.display = 'flex';
                carouselNext.style.display = 'flex';
                carouselIndicators.style.display = 'flex';
            }
        }

        function showSlide(index) {
            const slides = document.querySelectorAll('.carousel-slide');
            const indicators = document.querySelectorAll('.carousel-indicator');
            
            if (slides.length === 0) return;
            
            if (index >= slides.length) {
                currentSlideIndex = 0;
            } else if (index < 0) {
                currentSlideIndex = slides.length - 1;
            } else {
                currentSlideIndex = index;
            }
            
            slides.forEach(slide => slide.classList.remove('active'));
            indicators.forEach(indicator => indicator.classList.remove('active'));
            
            slides[currentSlideIndex].classList.add('active');
            indicators[currentSlideIndex].classList.add('active');
        }

        function showOrderModal(productId) {
            const product = findProductById(productId);
            if (!product) return;
            
            document.getElementById('order-product').value = product.name;
            orderModal.style.display = 'flex';
        }

        function findProductById(productId) {
            for (const brand in productsData) {
                const product = productsData[brand].find(p => p.id === productId);
                if (product) return product;
            }
            return null;
        }

        function filterProducts(searchTerm) {
            let allProducts = [];
            
            if (currentBrand) {
                allProducts = productsData[currentBrand] || [];
            } else {
                for (const brand in productsData) {
                    allProducts = allProducts.concat(productsData[brand]);
                }
            }
            
            if (!searchTerm) {
                displayProducts(allProducts);
                return;
            }
            
            const filteredProducts = allProducts.filter(product => 
                product.name.toLowerCase().includes(searchTerm.toLowerCase()) ||
                product.description.toLowerCase().includes(searchTerm.toLowerCase())
            );
            
            displayProducts(filteredProducts);
        }